Table users {
  id int [pk, increment]
  name varchar
  email varchar [unique]
  password varchar
  created_at timestamp
  updated_at timestamp
}

Table items {
  id int [pk, increment]
  title varchar
  description text
  price decimal
  stock int
  created_at timestamp
  updated_at timestamp
}

Table carts {
  id int [pk, increment]
  user_id int [ref: > users.id]
  created_at timestamp
  updated_at timestamp
}

Table cart_items {
  id int [pk, increment]
  cart_id int [ref: > carts.id]
  item_id int [ref: > items.id]
  quantity int
  created_at timestamp
  updated_at timestamp
}

Table orders {
  id int [pk, increment]
  user_id int [ref: > users.id]
  total_amount decimal
  status varchar // pending, paid, canceled
  created_at timestamp
  updated_at timestamp
}

Table order_items {
  id int [pk, increment]
  order_id int [ref: > orders.id]
  item_id int [ref: > items.id]
  quantity int
  price decimal
  created_at timestamp
  updated_at timestamp
}

Table payments {
  id int [pk, increment]
  order_id int [ref: > orders.id]
  gateway varchar // 'midtrans', 'xendit', dll
  external_id varchar [unique] // ID unik yang dikirim ke gateway
  payment_ref varchar [note: 'ID transaksi dari gateway (mis. payment_id, transaction_id)']
  amount decimal
  currency varchar [default: 'IDR']
  status varchar // pending, success, failed, refunded
  payment_method varchar [note: 'VA, QRIS, card, ewallet, dsb']
  meta json // full response dari gateway
  created_at timestamp
  updated_at timestamp
}